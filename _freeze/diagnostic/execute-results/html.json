{
  "hash": "dbfe6ebf72550324890bc804f6e242ca",
  "result": {
    "markdown": "---\ntitle: \"Batch Effect Diagnostics\"\nformat: html\n---\n\n\nIn this section, we will use a sample data included in this package to provide a thorough introduction to the key functionalities of the ComBatFamQC package for batch effect diagnostics.\n\n# Data\n\nThe sample dataset in the package is the longitudinal cortical thickness data from the\n[Alzheimerâ€™s Disease Neuroimaging Initiative](https://adni.loni.usc.edu/\n) (ADNI) study (Jack et al. (2008)), which con-\ntains cortical thickness measures of 62 regions from 663 unique participants with images\ncollected longitudinally between 2-6 visits. The processed data can be downloaded from [GitHub](\nhttps://github.com/ntustison/CrossLong). \n\nThe key variables of interest are presented below:\n\n-   Batch variable: \n    -   <span style=\"color:blueviolet;\">*manufac*</span>: MRI manufacturer\n-   Covariates\n    -   <span style=\"color:darkseagreen;\">*timedays*</span>: time related variable\n    -   <span style=\"color:darkseagreen;\">*Age*</span>\n    -   <span style=\"color:darkseagreen;\">*SEX*</span> \n    -   <span style=\"color:darkseagreen;\">*DIAGNOSIS*</span>: (AD, CN, LMCI)\n    \n    (We consider an interaction effect between *timedays* and *DIAGNOSIS*)\n-   Features to harmonize\n    -   62 <span style=\"color:coral;\">cortical thickness</span> regions\n-   Random Effect\n    -   <span style=\"color:cornflowerblue;\">*subid*</span> : Subject IDs.\n\n# Interactive Batch Effect Diagnostics\n\nUsers can launch the Shiny app using the following code:\n\n::: {.callout-note collapse=\"true\"}\n## R code\n\n::: {.cell}\n\n```{.r .cell-code}\nfeatures = colnames(adni)[c(43:104)]\ncovariates = c(\"timedays\", \"AGE\", \"SEX\", \"DIAGNOSIS\")\ninteraction = c(\"timedays,DIAGNOSIS\")\nbatch = \"manufac\"\nresult_orig = visual_prep(type = \"lm\", features = features, batch = batch, covariates = covariates, interaction = interaction, smooth = NULL, random = NULL, df = adni)\ncomfam_shiny(result_orig)\n```\n:::\n\n:::\n\n::: {.callout-tip collapse=\"true\"}\n## CLI code\n\n::: {.cell}\n\n```{.bash .cell-code}\nRscript path/to/combatQC_CLI.R path/to/unharmonized_data.csv -v TRUE --features 43-104 --covariates 9,11,13-14 -b 16 -i 9*14 -m lm \n```\n:::\n\n:::\n\n## Data Overview\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/d20G6R25b0Y >}}\n\n\n\nComBatFamQC: Data Overview\n\n:::\n\n## Summary\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/S9ibibL56bQ >}}\n\n\n\nComBatFamQC: Summary\n\n:::\n\n## Residial Plot\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/axKWqHL1rWI >}}\n\n\n\nComBatFamQC: Residual Plot\n\n:::\n\n## Diagnosis of Global Batch Effect\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/13B-B7_ZzGo >}}\n\n\n\nComBatFamQC: Diagnosis of Global Batch Effect\n\n:::\n\n## Diagnosis of Individual Batch Effect\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/cPLLbMQNchs >}}\n\n\n\nComBatFamQC: Diagnosis of Individual Batch Effect\n\n:::\n\n## Interactive Harmonization\n\n::: {#fig-cern}\n\n\n{{< video https://youtu.be/g1C3bsZIqqs >}}\n\n\n\nComBatFamQC: Interactive Harmonization\n\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}